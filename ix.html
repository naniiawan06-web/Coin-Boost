<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Coin Boost </title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#f2f2f2;margin:0}
.container{max-width:900px;margin:auto;background:#fff;padding:20px}
input,button,select{width:100%;padding:10px;margin-top:6px}
button{background:#4CAF50;color:#fff;border:none;border-radius:5px}
h2{background:#ffcc00;padding:10px}
.section{border:1px solid #ddd;padding:15px;margin-top:20px}
.hide{display:none}
.history{font-size:14px;background:#fafafa;padding:10px;margin-top:5px;border:1px solid #ddd}
.error{color:red}
.success{color:green}
</style>
</head>

<body>

<div class="container">

<!-- LOGIN / REGISTER -->
<div id="authBox">
<h2>Register</h2>
<input id="r_name" placeholder="Full Name">
<input id="r_number" placeholder="Mobile Number">
<input id="r_email" placeholder="Email">
<input id="r_pass" type="password" placeholder="Password">
<input id="r_cpass" type="password" placeholder="Confirm Password">
<button onclick="register()">Register</button>
<p id="r_msg" class="error"></p>

<hr>

<h2>Login</h2>
<input id="l_user" placeholder="Email or Number">
<input id="l_pass" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p id="l_msg" class="error"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hide">

<h2>Dashboard</h2>
<p>Balance: <b><span id="balance">0</span></b></p>
<p>Total Invested: <b><span id="invested">0</span></b></p>
<button onclick="logout()">Logout</button>

<!-- DEPOSIT -->
<div class="section">
<h3>Deposit</h3>
<input id="depAmount" type="number" placeholder="Amount">
<button onclick="deposit()">Deposit</button>
<p id="depMsg"></p>
</div>

<!-- INVEST -->
<div class="section">
<h3>Invest (1% per second)</h3>
<input id="invAmount" type="number" placeholder="Amount">
<button onclick="invest()">Start Invest</button>
</div>

<!-- WITHDRAW -->
<div class="section">
<h3>Withdraw</h3>
<input id="wdAmount" type="number" placeholder="Min 2000">
<button onclick="withdraw()">Withdraw</button>
<p id="wdMsg"></p>
</div>

<!-- HISTORIES -->
<div class="section">
<h3>Deposit History</h3>
<div id="depHistory"></div>
</div>

<div class="section">
<h3>Withdraw History</h3>
<div id="wdHistory"></div>
</div>

<div class="section">
<h3>Earning History</h3>
<div id="earnHistory"></div>
</div>

</div>
</div>

<script>
// ---------- STORAGE ----------
let user = JSON.parse(localStorage.getItem("user")) || null;
let balance = Number(localStorage.getItem("balance")) || 0;
let invested = Number(localStorage.getItem("invested")) || 0;
let depHist = JSON.parse(localStorage.getItem("depHist")) || [];
let wdHist = JSON.parse(localStorage.getItem("wdHist")) || [];
let earnHist = JSON.parse(localStorage.getItem("earnHist")) || [];

// ---------- AUTH ----------
function register(){
let n=r_name.value, num=r_number.value, e=r_email.value, p=r_pass.value, cp=r_cpass.value;
if(!n||!num||!e||!p||!cp) return r_msg.innerText="All fields required";
if(p!==cp) return r_msg.innerText="Passwords do not match";
localStorage.setItem("user",JSON.stringify({n,num,e,p}));
r_msg.innerText="Registered successfully. Login now.";
}

function login(){
let u=l_user.value, p=l_pass.value;
let saved=JSON.parse(localStorage.getItem("user"));
if(!saved|| (u!==saved.e && u!==saved.num) || p!==saved.p){
l_msg.innerText="Wrong login details"; return;
}
document.getElementById("authBox").classList.add("hide");
document.getElementById("dashboard").classList.remove("hide");
updateUI();
}

function logout(){
location.reload();
}

// ---------- UI ----------
function updateUI(){
balanceEl.innerText=balance.toFixed(2);
investedEl.innerText=invested.toFixed(2);
renderHistories();
}

// ---------- DEPOSIT ----------
function deposit(){
let amt=Number(depAmount.value);
if(amt<100) return depMsg.innerText="Min deposit 100";
balance+=amt;
depHist.push(`+${amt} | ${new Date().toLocaleString()} | Pending`);
save();
depMsg.innerText="Deposit Pending";
updateUI();
}

// ---------- INVEST ----------
function invest(){
let amt=Number(invAmount.value);
if(amt>balance) return alert("Insufficient balance");
balance-=amt; invested+=amt; save(); updateUI();

setInterval(()=>{
let earn=amt*0.01;
balance+=earn;
earnHist.push(`+${earn.toFixed(2)} | ${new Date().toLocaleTimeString()}`);
save(); updateUI();
},1000);
}

// ---------- WITHDRAW ----------
function withdraw(){
let amt=Number(wdAmount.value);
if(amt<2000||amt>balance) return alert("Invalid withdraw");
balance-=amt;
wdHist.push(`-${amt} | ${new Date().toLocaleString()} | Pending`);
save(); updateUI();
wdMsg.innerText="Withdraw Pending";
}

// ---------- SAVE ----------
function save(){
localStorage.setItem("balance",balance);
localStorage.setItem("invested",invested);
localStorage.setItem("depHist",JSON.stringify(depHist));
localStorage.setItem("wdHist",JSON.stringify(wdHist));
localStorage.setItem("earnHist",JSON.stringify(earnHist));
}

// ---------- HISTORIES ----------
function renderHistories(){
depHistory.innerHTML=depHist.map(h=>`<div class="history">${h}</div>`).join("");
wdHistory.innerHTML=wdHist.map(h=>`<div class="history">${h}</div>`).join("");
earnHistory.innerHTML=earnHist.map(h=>`<div class="history">${h}</div>`).join("");
}

// Auto login if already logged
if(user){
authBox.classList.add("hide");
dashboard.classList.remove("hide");
updateUI();
}
</script>

</body>
    </html>
